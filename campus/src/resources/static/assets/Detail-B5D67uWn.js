import{a as n}from"./axios-Cm0UX6qg.js";import{r as d,o,b as c,d as e,F as p,h as v,t as r,i as g,p as f,E as y,l as u,m}from"./index-yeZGxvQv.js";import{u as b}from"./index-BiQEVG5M.js";const w={class:"max-w-[80%] mx-auto"},j=e("div",{class:"mx-auto h-2"},null,-1),k=e("div",{class:"mx-auto h-2"},null,-1),B={class:"mx-auto min-h-screen max-w-[80%] bg-white"},D={class:"flex flex-col justify-center px-6"},S=["src"],E={class:"text-2xl font-semibold indent-2 leading-normal text-gray-700"},N=e("div",{class:"mx-auto h-5"},null,-1),$={class:"flex p-10 justify-center text-4xl text-center items-center"},I=e("span",{class:"text-white"},"购买",-1),C=[I],F={class:"text-red-600 mx-10"},L=g('<div class="mx-auto h-5"></div><div class="mx-auto max-w-[80%] bg-white"><div class="mx-auto w-full max-w-screen-xl"><div class="px-4 py-6 bg-gray-100 md:flex md:items-center md:justify-between"><span class="text-sm text-gray-500 sm:text-center">© 2024 <a href="#">校园日预约购票系统</a></span></div></div></div>',2),z={__name:"Detail",setup(M){const s=d({}),a=f();console.log(a.params.activity_id);const x=d("2024-06-15"),_=b();n.get(`/api/crud/activity/${Number(a.params.activity_id)}`).then(t=>{const i=t.data;console.log(s.value),s.value=i[0]}).catch(t=>{console.log(t)});const h=()=>{n.post(`/api/auth/activity/${_.userInfo.id}?activityId=${Number(a.params.activity_id)}&date=${x}`,{activityId:a.params.activity_id,currentDate:new Date().toLocaleDateString()}).then(t=>{t.data.code===200200?(y.alert("预约成功","提示",{type:"text",message:u("div",{class:"flex justify-center p-4"},[u("img",{src:t.data.data.imageBase64,alt:"预约成功"})])}),m.success("预约成功")):t.data.code===200401?m.error(t.data.data):console.log("预约活动错误"+t.data)}).catch(t=>{console.log(t)})};return(t,i)=>(o(),c("div",w,[j,k,e("div",B,[e("div",D,[(o(!0),c(p,null,v(s.value.images,l=>(o(),c("div",{class:"p-10 flex justify-center",key:l},[e("img",{src:"/"+l,alt:""},null,8,S)]))),128)),e("p",E,"     "+r(s.value.desc),1)]),N,e("div",$,[e("button",{onClick:h,class:"mx-10 border rounded-2xl hover:bg-blue-700 border-gray-600 p-5 bg-blue-500"},C),e("span",F,r(s.value.price===0?"免费":"¥"+s.value.price),1)])]),L]))}};export{z as default};
